parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function e(e){return t(e)||r(e)||l(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,n){if(e){if("string"==typeof e)return i(e,n);var l=Object.prototype.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?i(e,n):void 0}}function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function t(e){if(Array.isArray(e))return i(e)}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var l=0,r=new Array(n);l<n;l++)r[l]=e[l];return r}var c=document.getElementsByClassName("field-cell"),a=document.querySelector(".start"),o=document.querySelector(".game-score"),d=document.querySelector(".message-lose"),f=document.querySelector(".message-win"),s=document.querySelector(".message-start"),u=document.getElementsByClassName("field-row"),h=document.getElementsByClassName("field-cell"),m=0;function L(){var n=e(c).filter(function(e){return""!==e.textContent}),l=n.map(function(e){return+e.textContent}).reduce(function(e,n){return e+n}),r=1!==n.length?l:n[0].textContent;o.textContent=r}function v(){var n=Math.floor(100*Math.random())<=90?2:4,l=e(c).filter(function(e){return 1===e.classList.length}),r=Math.floor(Math.random()*l.length);l[r].classList.add("field-cell--".concat(n)),l[r].textContent=n}function M(e){for(var n=0;n<16;n++)if(n%4==0){var l=[+h[n].innerHTML,+h[n+1].innerHTML,+h[n+2].innerHTML,+h[n+3].innerHTML].filter(function(e){return e}),r=4-l.length,t=Array(r).fill(""),i=void 0;"right"===e&&(i=t.concat(l)),"left"===e&&(i=l.concat(t)),h[n].innerHTML=i[0],h[n+1].innerHTML=i[1],h[n+2].innerHTML=i[2],h[n+3].innerHTML=i[3],h[n].className=""===i[0]?"field-cell":"field-cell field-cell--".concat(i[0]),h[n+1].className=""===i[1]?"field-cell":"field-cell field-cell--".concat(i[1]),h[n+2].className=""===i[2]?"field-cell":"field-cell field-cell--".concat(i[2]),h[n+3].className=""===i[3]?"field-cell":"field-cell field-cell--".concat(i[3])}}function T(n){for(var l=[],r=0;r<4;r++){for(var t=[],i=0;i<4;i++)t.push(e(u)[i].children[r].innerHTML);l.push(t)}for(var c=0;c<4;c++){var a=[+l[c][0],+l[c][1],+l[c][2],+l[c][3]].filter(function(e){return e}),o=4-a.length,d=Array(o).fill(""),f=void 0;"up"===n&&(f=a.concat(d)),"down"===n&&(f=d.concat(a)),h[c].innerHTML=f[0],h[c+4].innerHTML=f[1],h[c+8].innerHTML=f[2],h[c+12].innerHTML=f[3],h[c].className=""===f[0]?"field-cell":"field-cell field-cell--".concat(f[0]),h[c+4].className=""===f[1]?"field-cell":"field-cell field-cell--".concat(f[1]),h[c+8].className=""===f[2]?"field-cell":"field-cell field-cell--".concat(f[2]),h[c+12].className=""===f[3]?"field-cell":"field-cell field-cell--".concat(f[3])}}function H(n){for(var l=0;l<4;l++){var r=[+e(u)[l].children[0].innerHTML,+e(u)[l].children[1].innerHTML,+e(u)[l].children[2].innerHTML,+e(u)[l].children[3].innerHTML],t=[].concat(r);if("right"===n)for(var i=3;i>0;i--)r[i]===r[i-1]&&t[i]===r[i]&&(t[i]=2*r[i-1],t[i-1]=0);if("left"===n)for(var c=0;c<4;c++)r[c]===r[c+1]&&t[c]===r[c]&&(t[c]=2*r[c],t[c+1]=0);e(u)[l].children[0].innerHTML=0===t[0]?"":t[0],e(u)[l].children[1].innerHTML=0===t[1]?"":t[1],e(u)[l].children[2].innerHTML=0===t[2]?"":t[2],e(u)[l].children[3].innerHTML=0===t[3]?"":t[3],e(u)[l].children[0].className=0===t[0]?"field-cell":"field-cell field-cell--".concat(t[0]),e(u)[l].children[1].className=0===t[1]?"field-cell":"field-cell field-cell--".concat(t[1]),e(u)[l].children[2].className=0===t[2]?"field-cell":"field-cell field-cell--".concat(t[2]),e(u)[l].children[3].className=0===t[3]?"field-cell":"field-cell field-cell--".concat(t[3])}}function y(n){for(var l=0;l<4;l++){var r=[+e(u)[0].children[l].innerHTML,+e(u)[1].children[l].innerHTML,+e(u)[2].children[l].innerHTML,+e(u)[3].children[l].innerHTML],t=[].concat(r);if("top"===n)for(var i=0;i<4;i++)r[i]===r[i+1]&&t[i]===r[i]&&(t[i]=2*r[i+1],t[i+1]=0);if("down"===n)for(var c=3;c>=0;c--)r[c]===r[c-1]&&t[c]===r[c]&&(t[c-1]=2*r[c],t[c]=0);e(u)[0].children[l].innerHTML=0===t[0]?"":t[0],e(u)[1].children[l].innerHTML=0===t[1]?"":t[1],e(u)[2].children[l].innerHTML=0===t[2]?"":t[2],e(u)[3].children[l].innerHTML=0===t[3]?"":t[3],e(u)[0].children[l].className=0===t[0]?"field-cell":"field-cell field-cell--".concat(t[0]),e(u)[1].children[l].className=0===t[1]?"field-cell":"field-cell field-cell--".concat(t[1]),e(u)[2].children[l].className=0===t[2]?"field-cell":"field-cell field-cell--".concat(t[2]),e(u)[3].children[l].className=0===t[3]?"field-cell":"field-cell field-cell--".concat(t[3])}}function g(){for(var n=0;n<16;n++)"2048"===e(h)[n].innerHTML&&f.classList.remove("hidden")}function p(){for(var n,l=[],r=[],t=0===e(c).filter(function(e){return""===e.textContent}).length,i=0;i<4;i++){for(var a=[],o=0;o<4;o++)a.push(+e(u)[o].children[i].innerHTML);var f=a.filter(function(e){return e});r.push(f)}for(var s=0;s<16;s++)if(s%4==0){var m=[+h[s].innerHTML,+h[s+1].innerHTML,+h[s+2].innerHTML,+h[s+3].innerHTML].filter(function(e){return e});l.push(m)}for(var L=0;L<4;L++){if(l[L].length>1)for(var v=0;v<l[L].length;v++)if(l[L][v]===l[L][v+1])return void(n=!0);if(r[L].length>1)for(var M=0;M<r[L].length;M++)if(r[L][M]===r[L][M+1])return void(n=!0);n=!1}!n&&t&&d.classList.remove("hidden")}a.addEventListener("click",function(){if(0===m)return v(),v(),m=1,a.classList.remove("start"),a.classList.add("restart"),a.textContent="Restart",s.classList.add("hidden"),void L();1===m&&(e(c).forEach(function(e){e.textContent="",e.className="field-cell"}),a.classList.remove("restart"),a.classList.add("start"),a.textContent="Start",o.textContent=0,m=0,s.classList.remove("hidden"),d.classList.add("hidden"),f.classList.add("hidden"))}),document.addEventListener("keydown",function(e){"ArrowUp"===e.key&&0!==m&&(T("up"),y("top"),T("up"),v(),L(),g(),p()),"ArrowDown"===e.key&&0!==m&&(T("down"),y("down"),T("down"),v(),L(),g(),p()),"ArrowLeft"===e.key&&0!==m&&(M("left"),H("left"),M("left"),v(),L(),g(),p()),"ArrowRight"===e.key&&0!==m&&(M("right"),H("right"),M("right"),v(),L(),g(),p())});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.14871b90.js.map